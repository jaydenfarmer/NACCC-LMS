<div class="sidebar">

  <nav class="sidebar-nav">
    @for (item of navItems(); track item.path) {
      @if (item.children && item.children.length > 0) {
        <!-- Parent item with submenu: hover shows flyout as overlay -->
             <div class="sidebar-item-group"
               [class.flyout-open]="isFlyoutOpen(item)"
               (mouseenter)="openFlyout(item, $event); setSidebarHover(true)"
               (mouseleave)="setSidebarHover(false)">
          <a [routerLink]="item.path" routerLinkActive="active" class="sidebar-link sidebar-parent">
            <span class="sidebar-icon">{{ item.icon }}</span>
            <span class="sidebar-label">{{ item.label }}</span>
            <svg class="chevron-icon" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3.5 2l3 3-3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      } @else {
        <!-- Regular link item without submenu -->
        <a [routerLink]="item.path" routerLinkActive="active" class="sidebar-link">
          <span class="sidebar-icon">{{ item.icon }}</span>
          <span class="sidebar-label">{{ item.label }}</span>
        </a>
      }
    } @empty {
      <div class="no-nav-items">
        <p>No navigation items available</p>
      </div>
    }
  </nav>


  <!-- Flyout overlay is now rendered globally in app.html -->

  <!-- Help Center link at bottom -->
  <div class="sidebar-footer">
    <a href="#" class="sidebar-link help-link">
      <span class="sidebar-icon">‚ùì</span>
      <span class="sidebar-label">Help Center</span>
      <svg class="external-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6.5v2.25A1.25 1.25 0 017.75 10h-5.5A1.25 1.25 0 011 8.75v-5.5A1.25 1.25 0 012.25 2H4.5M7 1h4v4M5.5 6.5L11 1" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</div>

