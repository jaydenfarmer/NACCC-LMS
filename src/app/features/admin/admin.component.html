<div class="admin-panel">
  <div class="admin-header">
    <h1>Admin Dashboard</h1>
    <p class="subtitle">Manage your LMS content and users</p>
  </div>

  <div class="tabs">
    <button
      class="tab"
      [class.active]="activeTab() === 'overview'"
      (click)="setTab('overview')"
    >
      ğŸ“Š Overview
    </button>
    <button
      class="tab"
      [class.active]="activeTab() === 'courses'"
      (click)="setTab('courses')"
    >
      ğŸ“š Courses
    </button>
    <button
      class="tab"
      [class.active]="activeTab() === 'users'"
      (click)="setTab('users')"
    >
      ğŸ‘¥ Users
    </button>
  </div>

  @if (activeTab() === 'overview') {
    <div class="overview-content">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“š</div>
          <div class="stat-content">
            <div class="stat-value">{{ stats().totalCourses }}</div>
            <div class="stat-label">Total Courses</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-content">
            <div class="stat-value">{{ stats().totalStudents }}</div>
            <div class="stat-label">Total Students</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ“–</div>
          <div class="stat-content">
            <div class="stat-value">{{ stats().activeEnrollments }}</div>
            <div class="stat-label">Active Enrollments</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">âœ…</div>
          <div class="stat-content">
            <div class="stat-value">{{ stats().completionRate }}%</div>
            <div class="stat-label">Completion Rate</div>
          </div>
        </div>
      </div>

      <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="actions-grid">
          <button type="button" class="action-card" (click)="openCourseForm()">
            <div class="action-icon">â•</div>
            <div class="action-content">
              <h3>Create Course</h3>
              <p>Add a new course to the catalog</p>
            </div>
          </button>
          <button class="action-card" (click)="setTab('courses')">
            <div class="action-icon">âœï¸</div>
            <div class="action-content">
              <h3>Manage Courses</h3>
              <p>Edit or delete existing courses</p>
            </div>
          </button>
          <button class="action-card" (click)="setTab('users')">
            <div class="action-icon">ğŸ‘¥</div>
            <div class="action-content">
              <h3>Manage Users</h3>
              <p>View and manage user accounts</p>
            </div>
          </button>
        </div>
      </div>
    </div>
  }

  @if (activeTab() === 'courses') {
    <div class="courses-content">
      <div class="section-header">
        <h2>Course Management</h2>
        <button class="btn-primary" (click)="openCourseForm()">
          â• Create Course
        </button>
      </div>

      <div class="courses-table">
        <table>
          <thead>
            <tr>
              <th>Course</th>
              <th>Category</th>
              <th>Level</th>
              <th>Students</th>
              <th>Rating</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (course of courses(); track course.id) {
              <tr>
                <td>
                  <div class="course-cell">
                    <img [src]="course.thumbnail" [alt]="course.title" class="course-thumb" />
                    <div>
                      <div class="course-name">{{ course.title }}</div>
                      <div class="course-instructor">{{ course.instructor.name }}</div>
                    </div>
                  </div>
                </td>
                <td>{{ course.category }}</td>
                <td>
                  <span class="badge badge-{{ course.difficulty }}">
                    {{ course.difficulty }}
                  </span>
                </td>
                <td>{{ course.enrolledCount }}</td>
                <td>â­ {{ course.rating }}</td>
                <td>
                  <div class="actions">
                    <button class="btn-icon" (click)="openCourseForm(course)" title="Edit">
                      âœï¸
                    </button>
                    <button class="btn-icon danger" (click)="deleteCourse(course.id)" title="Delete">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  }

  @if (activeTab() === 'users') {
    <div class="users-content">
      <div class="section-header">
        <h2>User Management</h2>
        <button class="btn-primary">â• Add User</button>
      </div>

      <div class="users-placeholder">
        <span class="placeholder-icon">ğŸ‘¥</span>
        <h3>User Management</h3>
        <p>User management features coming soon...</p>
      </div>
    </div>
  }

  @if (showCourseForm()) {
    <div class="modal-overlay" (click)="closeCourseForm()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>{{ editingCourse() ? 'Edit Course' : 'Create New Course' }}</h2>
          <button class="btn-close" (click)="closeCourseForm()">âœ•</button>
        </div>

        <div class="modal-body">
          <div class="form-group">
            <label>Course Title *</label>
            <input
              type="text"
              [value]="courseForm().title"
              (input)="updateFormField('title', $any($event.target).value)"
              placeholder="Enter course title"
              required
            />
          </div>

          <div class="form-group">
            <label>Description *</label>
            <textarea
              [value]="courseForm().description"
              (input)="updateFormField('description', $any($event.target).value)"
              placeholder="Enter course description"
              rows="4"
              required
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Category *</label>
              <select
                [value]="courseForm().category"
                (change)="updateFormField('category', $any($event.target).value)"
              >
                @for (cat of categories; track cat) {
                  <option [value]="cat">{{ cat }}</option>
                }
              </select>
            </div>

            <div class="form-group">
              <label>Difficulty Level *</label>
              <select
                [value]="courseForm().difficulty"
                (change)="updateFormField('difficulty', $any($event.target).value)"
              >
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Duration (minutes) *</label>
              <input
                type="number"
                [value]="courseForm().duration"
                (input)="updateFormField('duration', +$any($event.target).value)"
                placeholder="120"
                min="0"
                required
              />
            </div>

            <div class="form-group">
              <label>Total Lessons *</label>
              <input
                type="number"
                [value]="courseForm().totalLessons"
                (input)="updateFormField('totalLessons', +$any($event.target).value)"
                placeholder="10"
                min="0"
                required
              />
            </div>
          </div>

          <div class="form-group">
            <label>Thumbnail URL</label>
            <input
              type="url"
              [value]="courseForm().thumbnail"
              (input)="updateFormField('thumbnail', $any($event.target).value)"
              placeholder="https://..."
            />
          </div>

          <div class="form-group">
            <label>Tags (comma-separated)</label>
            <input
              type="text"
              [value]="courseForm().tags"
              (input)="updateFormField('tags', $any($event.target).value)"
              placeholder="credit, counseling, basics"
            />
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn-secondary" (click)="closeCourseForm()">Cancel</button>
          <button class="btn-primary" (click)="saveCourse()">
            {{ editingCourse() ? 'Update Course' : 'Create Course' }}
          </button>
        </div>
      </div>
    </div>
  }
</div>
